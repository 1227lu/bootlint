{
    "sudo": false,
    "language": "node_js",
    "node_js": ["5"],
    "before_install": [
        # Remove ./node_modules/.bin from PATH so node-which doesn't replace Unix which and cause RVM to barf. See https://github.com/travis-ci/travis-ci/issues/5092
        "export PATH=$(python -c 'from sys import argv;from collections import OrderedDict as od;print(\":\".join(od((p,None) for p in argv[1].split(\":\") if p.startswith(\"/\")).keys()))' \"$PATH\")",
        "rvm install 2.2",
        "rvm use 2.2 --fuzzy"
    ],
    "install": [
        "cp test-infra/npm-shrinkwrap.json ./",
        "npm install -g grunt-cli",
        "npm install",
        "bundle install --without development --deployment --jobs=3"
    ],
    "before_script": [
        "git clone --depth 1 https://github.com/twbs/bootstrap.git",
        "pushd bootstrap && jekyll build; popd"
    ],
    "script": [
        "npm test",
        "./src/cli-main.js bootstrap/_gh_pages/**/index.html",
        "./src/cli-main.js --disable W003,E001 test/fixtures/doctype/missing.html test/fixtures/viewport/missing.html",
        "./src/cli-main.js test/fixtures/x-ua-compatible/missing.html &> x-ua-compatible-missing.output.actual.txt || true",
        "diff test/fixtures/cli/x-ua-compatible-missing.output.txt x-ua-compatible-missing.output.actual.txt"
    ],
    "after_script": [
        "npm run coveralls"
    ],
    "cache": {
        "directories": [
            "node_modules",
            "vendor/bundle"
        ]
    }
}
